FROM ubuntu

COPY Server.zip Server.zip
RUN apt-get update
RUN apt-get -y install unzip
RUN apt-get -y install wget
RUN wget https://github.com/godotengine/godot-builds/releases/download/4.2.1-stable/Godot_v4.2.1-stable_mono_linux_x86_64.zip
RUN apt-get install -y dotnet-sdk-6.0
RUN apt-get install -y libfontconfig
RUN unzip Godot_v4.2.1-stable_mono_linux_x86_64.zip 
RUN rm -f Godot_v4.2.1-stable_mono_linux_x86_64.zip
RUN mv Godot_v4.2.1-stable_mono_linux_x86_64/ Server/
RUN unzip Server.zip -d Server/
RUN rm -f Server.zip
RUN chmod +x Server/Server.x86_64

WORKDIR /Server

EXPOSE 8080/udp
ENTRYPOINT [ "./Server.x86_64","--headless", "--playfab"]
